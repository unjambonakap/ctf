.section .text

.global _start

.code 16	
.thumb:
ldr %r0, .TARGET
ldr %r3, .MAGIC
ldr %r2, .TARGET2
b GO
.align	
.MAGIC:	.word  0xaaaaaaaa
.TARGET:	.word  0x8aaad5aa
.TARGET2:	.word  0xaaa95aaa

GO:
eor %r0, %r3, %r0
mov %r1, #'E'
strb %r1, [%r0]
add %r0, #1

mov %r1, #'E'
strb %r1, [%r0]
add %r0, #1
mov %r1, #'L'
strb %r1, [%r0]
add %r0, #1
mov %r1, #'L'
strb %r1, [%r0]
add %r0, #1
mov %r1, #'O'
strb %r1, [%r0]
add %r0, #1
mov %r1, #'N'
strb %r1, [%r0]
add %r0, #1

eor %r1, %r1
strb %r1, [%r0]


mov %r0, %r3
eor %r0, %r0, %r2
mov %r1, #'M'
strb %r1, [%r0]
add %r0, #1

mov %r1, #'E'
strb %r1, [%r0]
add %r0, #1
mov %r1, #'L'
strb %r1, [%r0]
add %r0, #1
mov %r1, #'L'
strb %r1, [%r0]
add %r0, #1
mov %r1, #'O'
strb %r1, [%r0]
add %r0, #1
mov %r1, #'N'
strb %r1, [%r0]
add %r0, #1

eor %r1, %r1
strb %r1, [%r0]
mov %pc, %lr

