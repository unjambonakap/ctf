.section .text

.global _start

.code 16
.thumb:
.align	
_start:
ldr %r0, n_key
push {%r0}
adr %r0, pattern_key
push {%r0}

ldr %r0, n_write
push {%r0}
adr %r0, pattern_write
push {%r0}


mov %r2, %sp

adr %r0, FUNC
ldr %r1, offset
add %r1, %r1, %r0

add %r1, #1
add %r0, #1

push {%r0}
mov %r0, %lr
pop {%pc}


.align
n_write:	.word  ${N_WRITE}
.align
pattern_write:	${PATTERN_WRITE}
.align
n_key:	.word  ${N_KEY}
.align
pattern_key:	 ${PATTERN_KEY}
.align
offset:	.word  ${FINDIT_FUNC_OFFSET}
.align
FUNC:
