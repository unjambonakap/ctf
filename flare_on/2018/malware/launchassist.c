/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2015 Hex-Rays <info@hex-rays.com>

   Detected compiler: Borland C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// LONG __stdcall InterlockedDecrement(LPLONG lpAddend);
// int __fastcall System::__linkproc__ FreeMem(_DWORD); weak
void __fastcall __noreturn sub_402C9C(UINT a1, int a2);
// int __fastcall System::__linkproc__ _IOTest(_DWORD); weak
// _DWORD __fastcall System::Move(const void *, void *, int); idb
int sub_402F50();
// int __fastcall System::__linkproc__ WriteLn(_DWORD); weak
int __fastcall sub_403914(System::TObject *this);
// _DWORD __fastcall System::TObject::~TObject(System::TObject *__hidden this); idb
// _DWORD __fastcall System::TObject::Free(System::TObject *__hidden this); idb
// _DWORD __fastcall System::TObject::CleanupInstance(System::TObject *__hidden this); idb
// int __fastcall System::__linkproc__ ClassDestroy(_DWORD); weak
// int System::__linkproc__ BeforeDestruction(void); weak
// int __fastcall System::__linkproc__ RaiseExcept(_DWORD); weak
// int System::__linkproc__ Halt0(void); weak
void __fastcall __noreturn sub_4044E4(UINT a1);
// int __fastcall System::__linkproc__ LStrClr(_DWORD); weak
// int __fastcall System::__linkproc__ LStrArrayClr(_DWORD, _DWORD); weak
// int __fastcall unknown_libname_59(_DWORD, _DWORD, _DWORD); weak
// int __fastcall System::__linkproc__ LStrCatN(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall System::__linkproc__ LStrToPChar(_DWORD); weak
int __fastcall sub_404B70(int a1, int a2);
// int __fastcall System::__linkproc__ WriteLString(_DWORD, _DWORD, _DWORD); weak
// int __fastcall System::__linkproc__ FinalizeArray(_DWORD, _DWORD, _DWORD); weak
// int unknown_libname_67(void); weak
int sub_405174();
int __fastcall sub_405194(int a1, int a2);
// int __cdecl System::__linkproc__ DynArraySetLength(_DWORD); weak
// int __fastcall System::__linkproc__ DynArrayClear(_DWORD, _DWORD); weak
int __fastcall sub_405894(bool (__fastcall *a1)());
int __fastcall sub_40589C(void (__fastcall *a1)(unsigned int));
// _DWORD __fastcall Sysutils::AddTerminateProc(bool (__fastcall *)()); idb
// _DWORD __fastcall System::RemoveModuleUnloadProc(void (__fastcall *)(unsigned int)); idb
LONG __fastcall sub_405A48(int a1);
// int __fastcall System::LoadResString(_DWORD, _DWORD); weak
signed int sub_405BC4();
// BOOL __stdcall CopyFileA(LPCSTR lpExistingFileName, LPCSTR lpNewFileName, BOOL bFailIfExists);
// int __stdcall unknown_libname_78(LPSECURITY_ATTRIBUTES lpMutexAttributes, int, LPCSTR lpName); idb
// void __stdcall ExitProcess_0(UINT uExitCode);
// DWORD GetLastError_0(void);
// DWORD __stdcall GetModuleFileNameA_0(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
// DWORD __stdcall GetModuleFileNameA_0_0(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
// void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// LPVOID __stdcall VirtualAlloc_0(LPVOID lpAddress, SIZE_T dwSize, DWORD flAllocationType, DWORD flProtect);
// DWORD __stdcall VirtualQuery_0(LPCVOID lpAddress, PMEMORY_BASIC_INFORMATION lpBuffer, DWORD dwLength);
// LPSTR __stdcall CharNextA_0(LPCSTR lpsz);
int __fastcall sub_4060F0(void *a1, const void *a2, int a3);
int __fastcall sub_406CF4(int a1, int a2, int a3);
// _DWORD __fastcall Sysutils::FileExists(const int System::AnsiString); idb
// _DWORD __fastcall Sysutils::ExtractFileName(const int System::AnsiString); idb
// char __usercall sub_407BFA@<al>(char *a1@<esi>);
// int sub_407C03(void); weak
// char __usercall sub_407CA0@<al>(int a1@<ebp>, char *a2@<edi>, char *a3@<esi>);
// void __usercall sub_407D0A(int a1@<ebp>, char *a2@<edi>);
// void __usercall sub_407D5E(int a1@<ebp>, void *a2@<edi>);
// void __usercall sub_407D6D(int a1@<eax>, _BYTE *a2@<edx>, _BYTE *a3@<ecx>, int a4@<ebp>);
// int __fastcall unknown_libname_123(_DWORD, _DWORD, _DWORD); weak
// _DWORD __stdcall Sysutils::Exception::Exception(_DWORD, _DWORD); weak
// _DWORD __stdcall Sysutils::Exception::Exception(_DWORD, _DWORD); weak
int __cdecl sub_40A70C(int a1);
LPSTR __fastcall sub_40AE04(LPCSTR lpsz);
int sub_40B694();
// _DWORD __fastcall Sysutils::RaiseLastOSError(DWORD dwMessageId); idb
signed __int32 __fastcall sub_40B7D0(volatile signed __int32 *a1, signed __int32 a2);
signed __int32 __fastcall sub_40B7D8(volatile signed __int32 *a1, unsigned int a2);
int sub_40C854();
int sub_40CE5C();
int __fastcall sub_40CEB0(Variants *this, Variants *this); // idb
int sub_40CF4C();
int __fastcall sub_40CFA0(Variants *this, Variants *this); // idb
int sub_40D03C();
int sub_40D324();
// int Variants::__linkproc__ VarClear(void); weak
void __spoils<edx,ecx> sub_40D610();
// _DWORD __fastcall Variants::VarTypeAsText(Variants *__hidden this, const unsigned __int16); idb
int sub_40EE0C();
int sub_40EE2C();
int sub_40EE34();
int sub_40EE3C();
int sub_40EE58();
void __fastcall sub_40F52C(int a1);
// int __usercall sub_40F6A4@<eax>(int a1@<ebp>);
void __fastcall sub_40F928(int a1);
int sub_40F934();
// _DWORD __fastcall Classes::TPersistent::AssignError(Classes::TPersistent *__hidden this, Classes::TPersistent *); idb
int __fastcall sub_40FA44(Classes::TPersistent *a1, Classes::TPersistent *a2);
int sub_40FB00();
// _DWORD __fastcall Classes::RemoveFixups(Classes::TPersistent *); idb
int sub_40FDBC();
// _DWORD __fastcall Registry::TRegistry::TRegistry(Registry::TRegistry *this); idb
int sub_40FF54();
// _DWORD __fastcall Registry::TRegistry::CloseKey(Registry::TRegistry *__hidden this); idb
// _DWORD __fastcall Registry::TRegistry::SetRootKey(Registry::TRegistry *this, unsigned int); idb
// _DWORD __fastcall Registry::TRegistry::OpenKey(Registry::TRegistry *this, const int System::AnsiString, bool); idb
// int __fastcall Registry::TRegistry::WriteString(_DWORD, _DWORD, _DWORD); weak
// _DWORD __fastcall Registry::TRegistry::KeyExists(Registry::TRegistry *__hidden this, const int System::AnsiString); idb
int sub_4102EC();
// int __stdcall SHGetFolderPathA(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
int sub_410814();
int sub_41083C();
int sub_410948();
int sub_410C10();

//-------------------------------------------------------------------------
// Data declarations

char byte_401018 = '\n'; // weak
_UNKNOWN loc_407CA5; // weak
// extern _UNKNOWN loc_407DD1; weak
_UNKNOWN loc_40A8C7; // weak
_UNKNOWN loc_40A8CE; // weak
char aEvariantinvali[23] = "\x16EVariantInvalidOpError"; // weak
char aEvarianttypeca[22] = "\x15EVariantTypeCastError"; // weak
char aEvariantarrayc[25] = "\x18EVariantArrayCreateError"; // weak
char aEvariantdispat[22] = "\x15EVariantDispatchError"; // weak
_UNKNOWN loc_40CEA6; // weak
_UNKNOWN loc_40CEAD; // weak
_UNKNOWN loc_40CF3F; // weak
_UNKNOWN loc_40CF46; // weak
_UNKNOWN loc_40CF96; // weak
_UNKNOWN loc_40CF9D; // weak
_UNKNOWN loc_40D02F; // weak
_UNKNOWN loc_40D036; // weak
_UNKNOWN loc_40D086; // weak
_UNKNOWN loc_40D08D; // weak
_UNKNOWN loc_40D36E; // weak
_UNKNOWN loc_40D375; // weak
_UNKNOWN loc_40FDF8; // weak
int dword_40FEB0[2] = { 14, 65536 }; // weak
_UNKNOWN loc_410328; // weak
char byte_410824 = '\x11'; // weak
_UNKNOWN loc_410922; // weak
_UNKNOWN loc_410929; // weak
_strings str_Delphi__Done_[2] = { { 4294967295, 13, "Delphi: Done!" }, { 1886152004, 540698984, "Done!" } }; // weak
_UNKNOWN loc_410BF7; // weak
_UNKNOWN loc_410BFE; // weak
_strings str___0[1] = { { 4294967295, 1, "\\" } }; // weak
_UNKNOWN loc_410C69; // weak
UINT uExitCode = 0u; // idb
int dword_412004 = 0; // weak
void *off_412A64 = (void *)0x40FDAC; // weak
void *off_412A6C = (void *)0x4102DC; // weak
int (*off_412A74)[7] = &dword_410344; // weak
char *off_412A78 = ";6\"94?6$$>$#y2/2W"; // weak
void *off_412A7C = (void *)0x41037C; // weak
int (*off_412A80)[14] = &dword_410398; // weak
int (*off_412A84)[273] = &dword_4103D0; // weak
int **off_412A8C[7] =
{
  &off_405D78,
  &off_405DC0,
  &off_405CC0,
  &off_405EA8,
  &off_405EE8,
  &off_405F50,
  &off_405E78
}; // weak
int **off_412A90[6] = { &off_405DC0, &off_405CC0, &off_405EA8, &off_405EE8, &off_405F50, &off_405E78 }; // weak
void **off_412B08 = &unk_413214; // idb
int **off_412B40[10] =
{
  &off_405D90,
  &off_405DB8,
  &off_405EA0,
  &off_40EFF0,
  &off_405E08,
  &off_40EFE0,
  &off_405EC8,
  &off_405DB0,
  &off_405EB8,
  &off_405ED8
}; // weak
int **off_412B5C[3] = { &off_405DB0, &off_405EB8, &off_405ED8 }; // weak
int **off_412B74[13] =
{
  &off_405DA8,
  &off_405E48,
  &off_405E88,
  &off_405F18,
  &off_40EFE8,
  &off_405CD0,
  &off_405D10,
  &off_405DE8,
  &off_405EC0,
  &off_405D20,
  &off_405F28,
  &off_405D18,
  &off_405F00
}; // weak
int **off_412BB0 = &off_405DC8; // weak
int **off_412BB8[2] = { &off_405D88, &off_405D30 }; // weak
int **off_412BBC = &off_405D30; // weak
int **off_412BF0 = &off_405E28; // weak
int **off_412C4C[2] = { &off_405D80, &off_405E68 }; // weak
int dword_416278; // weak
int dword_4162F4; // weak
int dword_4162F8; // weak
int dword_4162FC; // weak
int dword_416300; // weak


//----- (00402C9C) --------------------------------------------------------
void __fastcall __noreturn sub_402C9C(UINT a1, int a2)
{
  dword_412004 = a2;
  sub_4044E4(a1);
}
// 412004: using guessed type int dword_412004;

//----- (00402F50) --------------------------------------------------------
int sub_402F50()
{
  return 0;
}

//----- (00403914) --------------------------------------------------------
int __fastcall sub_403914(System::TObject *this)
{
  System::TObject *v1; // ebx@1

  v1 = this;
  System::TObject::CleanupInstance(this);
  return System::__linkproc__ FreeMem(v1);
}
// 402C34: using guessed type int __fastcall System::__linkproc__ FreeMem(_DWORD);

//----- (004044E4) --------------------------------------------------------
void __fastcall __noreturn sub_4044E4(UINT a1)
{
  uExitCode = a1;
  System::__linkproc__ Halt0();
}
// 404408: using guessed type int System::__linkproc__ Halt0(void);

//----- (004044F0) --------------------------------------------------------
#error "4044F6: positive sp value has been found (funcsize=0)"

//----- (00404B70) --------------------------------------------------------
int __fastcall sub_404B70(int a1, int a2)
{
  return System::__linkproc__ WriteLString(a1, a2, 0);
}
// 404B78: using guessed type int __fastcall System::__linkproc__ WriteLString(_DWORD, _DWORD, _DWORD);

//----- (00405174) --------------------------------------------------------
int sub_405174()
{
  return unknown_libname_67() - 1;
}
// 40516C: using guessed type int unknown_libname_67(void);

//----- (00405194) --------------------------------------------------------
int __fastcall sub_405194(int a1, int a2)
{
  return System::__linkproc__ DynArrayClear(a1, a2);
}
// 405334: using guessed type int __fastcall System::__linkproc__ DynArrayClear(_DWORD, _DWORD);

//----- (00405894) --------------------------------------------------------
int __fastcall sub_405894(bool (__fastcall *a1)())
{
  return Sysutils::AddTerminateProc(a1);
}

//----- (0040589C) --------------------------------------------------------
int __fastcall sub_40589C(void (__fastcall *a1)(unsigned int))
{
  return System::RemoveModuleUnloadProc(a1);
}

//----- (00405A48) --------------------------------------------------------
LONG __fastcall sub_405A48(int a1)
{
  return InterlockedDecrement((LPLONG)(a1 + 4));
}

//----- (00405BC4) --------------------------------------------------------
signed int sub_405BC4()
{
  return 12;
}

//----- (004060F0) --------------------------------------------------------
int __fastcall sub_4060F0(void *a1, const void *a2, int a3)
{
  return System::Move(a2, a1, a3);
}

//----- (00406CF4) --------------------------------------------------------
int __fastcall sub_406CF4(int a1, int a2, int a3)
{
  int v3; // eax@1

  v3 = Sysutils::Exception::Exception(a3, a2);
  return System::__linkproc__ RaiseExcept(v3);
}
// 403F5C: using guessed type int __fastcall System::__linkproc__ RaiseExcept(_DWORD);
// 40A3F4: using guessed type _DWORD __stdcall Sysutils::Exception::Exception(_DWORD, _DWORD);

//----- (00407BFA) --------------------------------------------------------
char __usercall sub_407BFA@<al>(char *a1@<esi>)
{
  char result; // al@1

  result = *a1;
  if ( !*a1 )
    result = 48;
  return result;
}

//----- (00407CA0) --------------------------------------------------------
char __usercall sub_407CA0@<al>(int a1@<ebp>, char *a2@<edi>, char *a3@<esi>)
{
  unsigned int v3; // edx@1
  int v4; // ecx@3
  char result; // al@4
  int v6; // ebx@5
  int v7; // ecx@7
  char v8; // al@9
  char v9; // al@12
  int v10; // edx@18

  sub_407C03();
  v3 = *(_DWORD *)(a1 + 8);
  if ( v3 >= 0x12 )
    v3 = 18;
  v4 = *(_WORD *)(a1 - 44);
  if ( v4 > 0 )
  {
    v6 = 0;
    if ( *(_BYTE *)(a1 + 16) != 2 )
    {
      LOBYTE(v6) = (unsigned __int16)(v4 - 1) % 3u;
      ++v6;
    }
    while ( 1 )
    {
      result = sub_407BFA(a3);
      *a2++ = result;
      v4 = v7 - 1;
      if ( !v4 )
        break;
      if ( !--v6 )
      {
        v8 = *(_BYTE *)(a1 - 6);
        if ( v8 )
        {
          *a2++ = v8;
          LOBYTE(v6) = 3;
        }
      }
    }
  }
  else
  {
    result = 48;
    *a2++ = 48;
  }
  if ( v3 )
  {
    v9 = *(_BYTE *)(a1 - 5);
    if ( v9 )
      *a2++ = v9;
    if ( v4 )
    {
      result = 48;
      while ( 1 )
      {
        *a2++ = 48;
        if ( !--v3 )
          break;
        if ( !++v4 )
          goto LABEL_18;
      }
    }
    else
    {
      do
      {
LABEL_18:
        result = sub_407BFA(a3);
        *a2++ = result;
      }
      while ( v10 != 1 );
    }
  }
  return result;
}
// 407C03: using guessed type int sub_407C03(void);

//----- (00407D0A) --------------------------------------------------------
void __usercall sub_407D0A(int a1@<ebp>, char *a2@<edi>)
{
  int v2; // ebx@1
  signed __int16 v3; // cx@1
  char *v4; // ebx@5
  int v5; // ecx@5
  char v6; // al@6
  int v7; // [sp-4h] [bp-4h]@7

  v2 = *(_BYTE *)(a1 - 13);
  v3 = 3;
  if ( *(_BYTE *)(a1 - 42) )
  {
    LOBYTE(v2) = *(_BYTE *)(a1 - 14);
    v3 = 1039;
  }
  if ( (unsigned __int8)v2 > (unsigned __int8)v3 )
    LOBYTE(v2) = v3;
  LOBYTE(v2) = HIBYTE(v3) + v2;
  v4 = (char *)sub_407D6D + 5 * v2 + *(_DWORD *)(a1 - 20);
  v5 = 5;
  do
  {
    v6 = *v4;
    if ( *v4 == 64 )
      break;
    v7 = v5;
    if ( v6 == 36 )
    {
      sub_407D5E(a1, a2);
    }
    else if ( v6 == 42 )
    {
      ((void (*)(void))loc_407CA5)();
    }
    else
    {
      *a2++ = v6;
    }
    ++v4;
    v5 = v7 - 1;
  }
  while ( v7 != 1 );
}

//----- (00407D5E) --------------------------------------------------------
void __usercall sub_407D5E(int a1@<ebp>, void *a2@<edi>)
{
  const void *v2; // esi@1

  v2 = *(const void **)(a1 - 12);
  if ( v2 )
    qmemcpy(a2, v2, *((_DWORD *)v2 - 1));
}

//----- (00407D6D) --------------------------------------------------------
void __usercall sub_407D6D(int a1@<eax>, _BYTE *a2@<edx>, _BYTE *a3@<ecx>, int a4@<ebp>)
{
  int v4; // eax@1

  LOBYTE(a1) = a1 & 0x2A;
  v4 = a1 + 3;
  BYTE1(v4) -= *(_BYTE *)(3 * v4);
  v4 += 2;
  LOBYTE(v4) = v4 & 0x20;
  LOBYTE(v4) = v4 - *(_BYTE *)(v4 + 64);
  BYTE1(v4) -= *(_BYTE *)v4;
  LOBYTE(v4) = v4 & 0x40;
  ++v4;
  a2[a4] -= BYTE1(v4);
  *(_DWORD *)(v4 + 45) -= v4;
  LOBYTE(v4) = v4 & 0x2A;
  v4 += 2;
  LOBYTE(v4) = v4 & 0x2D;
  LOBYTE(v4) = (v4 - *(_BYTE *)(v4 + 64)) & 0x2A;
  v4 -= 707280960;
  LOBYTE(v4) = v4 & 0x29;
  v4 -= 1077945385;
  LOBYTE(v4) = v4 & 0x2D;
  v4 += 2142355380;
  BYTE1(v4) -= *(_BYTE *)v4;
  LOBYTE(v4) = v4 & 0x2D;
  ++v4;
  LOBYTE(v4) = v4 & 0x20;
  BYTE1(a3) = BYTE1(a3) - v2A404024 - v2D202440;
  LOBYTE(v4) = v4 - *(_BYTE *)(v4 + 42);
  BYTE1(a3) -= *a3;
  *a2 -= BYTE1(a3);
  a3[a4] &= (unsigned __int16)(v4 - 9248) >> 8;
  JUMPOUT(loc_407DD1);
}

//----- (0040A70C) --------------------------------------------------------
int __cdecl sub_40A70C(int a1)
{
  int v1; // ebx@1
  int v2; // esi@4
  int v3; // ebx@6
  unsigned int v5; // [sp-Ch] [bp-184h]@1
  void *v6; // [sp-8h] [bp-180h]@1
  int *v7; // [sp-4h] [bp-17Ch]@1
  int v8; // [sp+8h] [bp-170h]@1
  int v9; // [sp+Ch] [bp-16Ch]@7
  char v10; // [sp+10h] [bp-168h]@7
  int v11; // [sp+14h] [bp-164h]@7
  char v12; // [sp+18h] [bp-160h]@7
  int v13; // [sp+1Ch] [bp-15Ch]@7
  char v14; // [sp+20h] [bp-158h]@7
  int v15; // [sp+24h] [bp-154h]@1
  int System::AnsiString; // [sp+28h] [bp-150h]@1
  int v17; // [sp+2Ch] [bp-14Ch]@1
  int v18; // [sp+30h] [bp-148h]@6
  char v19; // [sp+34h] [bp-144h]@6
  int v20; // [sp+38h] [bp-140h]@6
  char v21; // [sp+3Ch] [bp-13Ch]@6
  int v22; // [sp+40h] [bp-138h]@6
  char v23; // [sp+44h] [bp-134h]@6
  int v24; // [sp+48h] [bp-130h]@6
  char v25; // [sp+4Ch] [bp-12Ch]@6
  CHAR Filename; // [sp+53h] [bp-125h]@5
  struct _MEMORY_BASIC_INFORMATION Buffer; // [sp+158h] [bp-20h]@4
  int v28; // [sp+174h] [bp-4h]@1
  int savedregs; // [sp+178h] [bp+0h]@1

  v8 = 0;
  v17 = 0;
  v15 = 0;
  System::AnsiString = 0;
  v28 = 0;
  v7 = &savedregs;
  v6 = &loc_40A8C7;
  v5 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v5);
  v1 = *(_DWORD *)(a1 - 4);
  if ( *(_DWORD *)(v1 + 20) )
    System::LoadResString(off_412BB8[0], &v28);
  else
    System::LoadResString(off_412C4C[0], &v28);
  v2 = *(_DWORD *)(v1 + 24);
  VirtualQuery_0(*(LPCVOID *)(v1 + 12), &Buffer, 0x1Cu);
  if ( Buffer.State == 4096 && GetModuleFileNameA_0((HMODULE)Buffer.AllocationBase, &Filename, 0x105u) )
  {
    v18 = *(_DWORD *)(v1 + 12);
    v19 = 5;
    unknown_libname_59(&System::AnsiString, &Filename, 261);
    Sysutils::ExtractFileName(System::AnsiString);
    v20 = v17;
    v21 = 11;
    v22 = v28;
    v23 = 11;
    v24 = v2;
    v25 = 5;
    System::LoadResString(off_412BF0, &v15);
    v3 = Sysutils::Exception::Exception(3, &v18);
  }
  else
  {
    v9 = *(_DWORD *)(v1 + 12);
    v10 = 5;
    v11 = v28;
    v12 = 11;
    v13 = v2;
    v14 = 5;
    System::LoadResString(off_412BBC, &v8);
    v3 = Sysutils::Exception::Exception(2, &v9);
  }
  __writefsdword(0, v5);
  v7 = (int *)&loc_40A8CE;
  System::__linkproc__ LStrClr(&v8);
  System::__linkproc__ LStrArrayClr(&v15, 3);
  System::__linkproc__ LStrClr(&v28);
  return v3;
}
// 4044FC: using guessed type int __fastcall System::__linkproc__ LStrClr(_DWORD);
// 404520: using guessed type int __fastcall System::__linkproc__ LStrArrayClr(_DWORD, _DWORD);
// 40476C: using guessed type int __fastcall unknown_libname_59(_DWORD, _DWORD, _DWORD);
// 405AD8: using guessed type int __fastcall System::LoadResString(_DWORD, _DWORD);
// 40A338: using guessed type _DWORD __stdcall Sysutils::Exception::Exception(_DWORD, _DWORD);
// 412BB8: using guessed type int **off_412BB8[2];
// 412BBC: using guessed type int **off_412BBC;
// 412BF0: using guessed type int **off_412BF0;
// 412C4C: using guessed type int **off_412C4C[2];

//----- (0040AE04) --------------------------------------------------------
LPSTR __fastcall sub_40AE04(LPCSTR lpsz)
{
  return CharNextA_0(lpsz);
}

//----- (0040B694) --------------------------------------------------------
int sub_40B694()
{
  DWORD v0; // eax@1

  v0 = GetLastError_0();
  return Sysutils::RaiseLastOSError(v0);
}

//----- (0040B7D0) --------------------------------------------------------
signed __int32 __fastcall sub_40B7D0(volatile signed __int32 *a1, signed __int32 a2)
{
  return _InterlockedExchange(a1, a2);
}

//----- (0040B7D8) --------------------------------------------------------
signed __int32 __fastcall sub_40B7D8(volatile signed __int32 *a1, unsigned int a2)
{
  return _InterlockedExchangeAdd(a1, a2);
}

//----- (0040C854) --------------------------------------------------------
int sub_40C854()
{
  int result; // eax@1
  unsigned int v1; // [sp-Ch] [bp-Ch]@1

  v1 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v1);
  ++dword_416278;
  result = 0;
  __writefsdword(0, v1);
  return result;
}
// 416278: using guessed type int dword_416278;

//----- (0040CE5C) --------------------------------------------------------
int sub_40CE5C()
{
  int v0; // edx@1
  int v1; // eax@1
  unsigned __int32 v3; // [sp-Ch] [bp-10h]@1
  void *v4; // [sp-8h] [bp-Ch]@1
  void **v5; // [sp-4h] [bp-8h]@1
  int v6; // [sp+0h] [bp-4h]@1
  void *savedregs; // [sp+4h] [bp+0h]@1

  v6 = 0;
  v5 = &savedregs;
  v4 = &loc_40CEA6;
  v3 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v3);
  System::LoadResString(off_412B74[0], &v6);
  LOBYTE(v0) = 1;
  v1 = unknown_libname_123(aEvarianttypeca, v0, v6);
  System::__linkproc__ RaiseExcept(v1);
  __writefsdword(0, (unsigned int)v5);
  savedregs = &loc_40CEAD;
  return System::__linkproc__ LStrClr(&v6);
}
// 403F5C: using guessed type int __fastcall System::__linkproc__ RaiseExcept(_DWORD);
// 4044FC: using guessed type int __fastcall System::__linkproc__ LStrClr(_DWORD);
// 405AD8: using guessed type int __fastcall System::LoadResString(_DWORD, _DWORD);
// 40A2FC: using guessed type int __fastcall unknown_libname_123(_DWORD, _DWORD, _DWORD);
// 412B74: using guessed type int **off_412B74[13];

//----- (0040CEB0) --------------------------------------------------------
int __fastcall sub_40CEB0(Variants *this, Variants *a2)
{
  Variants *v2; // esi@1
  int v3; // eax@1
  unsigned __int32 v5; // [sp-Ch] [bp-30h]@1
  void *v6; // [sp-8h] [bp-2Ch]@1
  int *v7; // [sp-4h] [bp-28h]@1
  void *v8; // [sp+0h] [bp-24h]@1
  int v9; // [sp+8h] [bp-1Ch]@1
  unsigned __int16 v10[2]; // [sp+Ch] [bp-18h]@1
  unsigned __int16 v11[2]; // [sp+10h] [bp-14h]@1
  int v12; // [sp+14h] [bp-10h]@1
  char v13; // [sp+18h] [bp-Ch]@1
  int v14; // [sp+1Ch] [bp-8h]@1
  char v15; // [sp+20h] [bp-4h]@1
  int savedregs; // [sp+24h] [bp+0h]@1

  *(_DWORD *)v11 = 0;
  *(_DWORD *)v10 = 0;
  v9 = 0;
  v2 = a2;
  v7 = &savedregs;
  v6 = &loc_40CF3F;
  v5 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v5);
  Variants::VarTypeAsText(this, (unsigned int)v11);
  v12 = *(_DWORD *)v11;
  v13 = 11;
  Variants::VarTypeAsText(v2, (unsigned int)v10);
  v14 = *(_DWORD *)v10;
  v15 = 11;
  System::LoadResString(off_412A90[0], &v9);
  v3 = Sysutils::Exception::Exception(1, &v12);
  System::__linkproc__ RaiseExcept(v3);
  __writefsdword(0, (unsigned int)v6);
  v8 = &loc_40CF46;
  return System::__linkproc__ LStrArrayClr(&v9, 3);
}
// 403F5C: using guessed type int __fastcall System::__linkproc__ RaiseExcept(_DWORD);
// 404520: using guessed type int __fastcall System::__linkproc__ LStrArrayClr(_DWORD, _DWORD);
// 405AD8: using guessed type int __fastcall System::LoadResString(_DWORD, _DWORD);
// 40A338: using guessed type _DWORD __stdcall Sysutils::Exception::Exception(_DWORD, _DWORD);
// 412A90: using guessed type int **off_412A90[6];

//----- (0040CF4C) --------------------------------------------------------
int sub_40CF4C()
{
  int v0; // edx@1
  int v1; // eax@1
  unsigned __int32 v3; // [sp-Ch] [bp-10h]@1
  void *v4; // [sp-8h] [bp-Ch]@1
  void **v5; // [sp-4h] [bp-8h]@1
  int v6; // [sp+0h] [bp-4h]@1
  void *savedregs; // [sp+4h] [bp+0h]@1

  v6 = 0;
  v5 = &savedregs;
  v4 = &loc_40CF96;
  v3 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v3);
  System::LoadResString(off_412B5C[0], &v6);
  LOBYTE(v0) = 1;
  v1 = unknown_libname_123(aEvariantinvali, v0, v6);
  System::__linkproc__ RaiseExcept(v1);
  __writefsdword(0, (unsigned int)v5);
  savedregs = &loc_40CF9D;
  return System::__linkproc__ LStrClr(&v6);
}
// 403F5C: using guessed type int __fastcall System::__linkproc__ RaiseExcept(_DWORD);
// 4044FC: using guessed type int __fastcall System::__linkproc__ LStrClr(_DWORD);
// 405AD8: using guessed type int __fastcall System::LoadResString(_DWORD, _DWORD);
// 40A2FC: using guessed type int __fastcall unknown_libname_123(_DWORD, _DWORD, _DWORD);
// 412B5C: using guessed type int **off_412B5C[3];

//----- (0040CFA0) --------------------------------------------------------
int __fastcall sub_40CFA0(Variants *this, Variants *a2)
{
  Variants *v2; // esi@1
  int v3; // eax@1
  unsigned __int32 v5; // [sp-Ch] [bp-30h]@1
  void *v6; // [sp-8h] [bp-2Ch]@1
  int *v7; // [sp-4h] [bp-28h]@1
  void *v8; // [sp+0h] [bp-24h]@1
  int v9; // [sp+8h] [bp-1Ch]@1
  unsigned __int16 v10[2]; // [sp+Ch] [bp-18h]@1
  unsigned __int16 v11[2]; // [sp+10h] [bp-14h]@1
  int v12; // [sp+14h] [bp-10h]@1
  char v13; // [sp+18h] [bp-Ch]@1
  int v14; // [sp+1Ch] [bp-8h]@1
  char v15; // [sp+20h] [bp-4h]@1
  int savedregs; // [sp+24h] [bp+0h]@1

  *(_DWORD *)v11 = 0;
  *(_DWORD *)v10 = 0;
  v9 = 0;
  v2 = a2;
  v7 = &savedregs;
  v6 = &loc_40D02F;
  v5 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v5);
  Variants::VarTypeAsText(this, (unsigned int)v11);
  v12 = *(_DWORD *)v11;
  v13 = 11;
  Variants::VarTypeAsText(v2, (unsigned int)v10);
  v14 = *(_DWORD *)v10;
  v15 = 11;
  System::LoadResString(off_412BB0, &v9);
  v3 = Sysutils::Exception::Exception(1, &v12);
  System::__linkproc__ RaiseExcept(v3);
  __writefsdword(0, (unsigned int)v6);
  v8 = &loc_40D036;
  return System::__linkproc__ LStrArrayClr(&v9, 3);
}
// 403F5C: using guessed type int __fastcall System::__linkproc__ RaiseExcept(_DWORD);
// 404520: using guessed type int __fastcall System::__linkproc__ LStrArrayClr(_DWORD, _DWORD);
// 405AD8: using guessed type int __fastcall System::LoadResString(_DWORD, _DWORD);
// 40A338: using guessed type _DWORD __stdcall Sysutils::Exception::Exception(_DWORD, _DWORD);
// 412BB0: using guessed type int **off_412BB0;

//----- (0040D03C) --------------------------------------------------------
int sub_40D03C()
{
  int v0; // edx@1
  int v1; // eax@1
  unsigned __int32 v3; // [sp-Ch] [bp-10h]@1
  void *v4; // [sp-8h] [bp-Ch]@1
  void **v5; // [sp-4h] [bp-8h]@1
  int v6; // [sp+0h] [bp-4h]@1
  void *savedregs; // [sp+4h] [bp+0h]@1

  v6 = 0;
  v5 = &savedregs;
  v4 = &loc_40D086;
  v3 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v3);
  System::LoadResString(off_412B40[0], &v6);
  LOBYTE(v0) = 1;
  v1 = unknown_libname_123(aEvariantarrayc, v0, v6);
  System::__linkproc__ RaiseExcept(v1);
  __writefsdword(0, (unsigned int)v5);
  savedregs = &loc_40D08D;
  return System::__linkproc__ LStrClr(&v6);
}
// 403F5C: using guessed type int __fastcall System::__linkproc__ RaiseExcept(_DWORD);
// 4044FC: using guessed type int __fastcall System::__linkproc__ LStrClr(_DWORD);
// 405AD8: using guessed type int __fastcall System::LoadResString(_DWORD, _DWORD);
// 40A2FC: using guessed type int __fastcall unknown_libname_123(_DWORD, _DWORD, _DWORD);
// 412B40: using guessed type int **off_412B40[10];

//----- (0040D324) --------------------------------------------------------
int sub_40D324()
{
  int v0; // edx@1
  int v1; // eax@1
  unsigned __int32 v3; // [sp-Ch] [bp-10h]@1
  void *v4; // [sp-8h] [bp-Ch]@1
  void **v5; // [sp-4h] [bp-8h]@1
  int v6; // [sp+0h] [bp-4h]@1
  void *savedregs; // [sp+4h] [bp+0h]@1

  v6 = 0;
  v5 = &savedregs;
  v4 = &loc_40D36E;
  v3 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v3);
  System::LoadResString(off_412A8C[0], &v6);
  LOBYTE(v0) = 1;
  v1 = unknown_libname_123(aEvariantdispat, v0, v6);
  System::__linkproc__ RaiseExcept(v1);
  __writefsdword(0, (unsigned int)v5);
  savedregs = &loc_40D375;
  return System::__linkproc__ LStrClr(&v6);
}
// 403F5C: using guessed type int __fastcall System::__linkproc__ RaiseExcept(_DWORD);
// 4044FC: using guessed type int __fastcall System::__linkproc__ LStrClr(_DWORD);
// 405AD8: using guessed type int __fastcall System::LoadResString(_DWORD, _DWORD);
// 40A2FC: using guessed type int __fastcall unknown_libname_123(_DWORD, _DWORD, _DWORD);
// 412A8C: using guessed type int **off_412A8C[7];

//----- (0040D610) --------------------------------------------------------
void __spoils<edx,ecx> sub_40D610()
{
  Variants::__linkproc__ VarClear();
}
// 40D5FC: using guessed type int Variants::__linkproc__ VarClear(void);

//----- (0040EE0C) --------------------------------------------------------
int sub_40EE0C()
{
  return 0;
}

//----- (0040EE2C) --------------------------------------------------------
int sub_40EE2C()
{
  return sub_40CE5C();
}

//----- (0040EE34) --------------------------------------------------------
int sub_40EE34()
{
  return sub_40CF4C();
}

//----- (0040EE3C) --------------------------------------------------------
int sub_40EE3C()
{
  return sub_40D324();
}

//----- (0040EE58) --------------------------------------------------------
int sub_40EE58()
{
  return sub_40EE34();
}

//----- (0040F52C) --------------------------------------------------------
void __fastcall sub_40F52C(int a1)
{
  LeaveCriticalSection((LPCRITICAL_SECTION)(a1 + 8));
}

//----- (0040F6A4) --------------------------------------------------------
int __usercall sub_40F6A4@<eax>(int a1@<ebp>)
{
  return *(_DWORD *)(a1 + 4);
}

//----- (0040F928) --------------------------------------------------------
void __fastcall sub_40F928(int a1)
{
  LeaveCriticalSection((LPCRITICAL_SECTION)(a1 + 8));
}

//----- (0040F934) --------------------------------------------------------
int sub_40F934()
{
  Classes::TPersistent *v0; // eax@1
  char v1; // dl@1
  char v2; // bl@1
  System::TObject *v3; // esi@1
  int result; // eax@1

  v0 = (Classes::TPersistent *)System::__linkproc__ BeforeDestruction();
  v2 = v1;
  v3 = v0;
  Classes::RemoveFixups(v0);
  result = System::TObject::~TObject(v3);
  if ( v2 > 0 )
    result = System::__linkproc__ ClassDestroy(v3);
  return result;
}
// 403BF8: using guessed type int __fastcall System::__linkproc__ ClassDestroy(_DWORD);
// 403C50: using guessed type int System::__linkproc__ BeforeDestruction(void);

//----- (0040FA44) --------------------------------------------------------
int __fastcall sub_40FA44(Classes::TPersistent *a1, Classes::TPersistent *a2)
{
  return Classes::TPersistent::AssignError(a2, a1);
}

//----- (0040FB00) --------------------------------------------------------
int sub_40FB00()
{
  return 0;
}

//----- (0040FDBC) --------------------------------------------------------
int sub_40FDBC()
{
  int result; // eax@3
  unsigned int v1; // [sp-Ch] [bp-Ch]@1
  void *v2; // [sp-8h] [bp-8h]@1
  int *v3; // [sp-4h] [bp-4h]@1
  int savedregs; // [sp+0h] [bp+0h]@1

  v3 = &savedregs;
  v2 = &loc_40FDF8;
  v1 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v1);
  if ( !++dword_4162F4 )
    System::__linkproc__ FinalizeArray(&off_412A64, &byte_401018, 2);
  result = 0;
  __writefsdword(0, v1);
  return result;
}
// 401018: using guessed type char byte_401018;
// 404E10: using guessed type int __fastcall System::__linkproc__ FinalizeArray(_DWORD, _DWORD, _DWORD);
// 412A64: using guessed type void *off_412A64;
// 4162F4: using guessed type int dword_4162F4;

//----- (0040FF54) --------------------------------------------------------
int sub_40FF54()
{
  Registry::TRegistry *v0; // eax@1
  char v1; // dl@1
  char v2; // bl@1
  System::TObject *v3; // esi@1
  int result; // eax@1

  v0 = (Registry::TRegistry *)System::__linkproc__ BeforeDestruction();
  v2 = v1;
  v3 = v0;
  Registry::TRegistry::CloseKey(v0);
  result = System::TObject::~TObject(v3);
  if ( v2 > 0 )
    result = System::__linkproc__ ClassDestroy(v3);
  return result;
}
// 403BF8: using guessed type int __fastcall System::__linkproc__ ClassDestroy(_DWORD);
// 403C50: using guessed type int System::__linkproc__ BeforeDestruction(void);

//----- (004102EC) --------------------------------------------------------
int sub_4102EC()
{
  int result; // eax@3
  unsigned int v1; // [sp-Ch] [bp-Ch]@1
  void *v2; // [sp-8h] [bp-8h]@1
  int *v3; // [sp-4h] [bp-4h]@1
  int savedregs; // [sp+0h] [bp+0h]@1

  v3 = &savedregs;
  v2 = &loc_410328;
  v1 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v1);
  if ( !++dword_4162F8 )
    System::__linkproc__ FinalizeArray(&off_412A6C, &byte_401018, 2);
  result = 0;
  __writefsdword(0, v1);
  return result;
}
// 401018: using guessed type char byte_401018;
// 404E10: using guessed type int __fastcall System::__linkproc__ FinalizeArray(_DWORD, _DWORD, _DWORD);
// 412A6C: using guessed type void *off_412A6C;
// 4162F8: using guessed type int dword_4162F8;

//----- (00410814) --------------------------------------------------------
int sub_410814()
{
  sub_410948();
  return sub_41083C();
}

//----- (0041083C) --------------------------------------------------------
int sub_41083C()
{
  int (*v0)[273]; // ebx@1
  int (*v1)[273]; // eax@3
  int (*v2)[273]; // edx@5
  signed int v3; // eax@6
  int (*v4)[273]; // eax@8
  int v5; // eax@10
  int v6; // eax@10
  unsigned __int32 v8; // [sp-Ch] [bp-20h]@1
  void *v9; // [sp-8h] [bp-1Ch]@1
  int *v10; // [sp-4h] [bp-18h]@1
  void *v11; // [sp+0h] [bp-14h]@10
  int (*v12)[273]; // [sp+8h] [bp-Ch]@1
  void *v13; // [sp+Ch] [bp-8h]@1
  char *v14; // [sp+10h] [bp-4h]@1
  int savedregs; // [sp+14h] [bp+0h]@1

  v14 = 0;
  v10 = &savedregs;
  v9 = &loc_410922;
  v8 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v8);
  v13 = VirtualAlloc_0(0, 0xAu, 0x3000u, 0x40u);
  v12 = off_412A84;
  v0 = off_412A84;
  if ( off_412A84 )
    v0 = (int (*)[273])(*v12)[-1];
  System::__linkproc__ DynArraySetLength(v0);
  v12 = off_412A84;
  v1 = off_412A84;
  if ( off_412A84 )
    v1 = (int (*)[273])(*v12)[-1];
  v2 = v1;
  if ( (signed int)v1 > 0 )
  {
    v3 = 1;
    do
    {
      v14[v3 - 1] = *((_BYTE *)&(*off_412A84)[0] + v3 - 1) ^ 0x77;
      ++v3;
      v2 = (int (*)[273])((char *)v2 - 1);
    }
    while ( v2 );
  }
  v12 = off_412A84;
  v4 = off_412A84;
  if ( off_412A84 )
    v4 = (int (*)[273])(*v12)[-1];
  sub_4060F0(v13, v14, (int)v4);
  ((void (__stdcall *)(unsigned __int32))v13)(v8);
  v5 = sub_404B70((int)off_412B08, (int)&str_Delphi__Done_[1]);
  v6 = System::__linkproc__ WriteLn(v5);
  System::__linkproc__ _IOTest(v6);
  __writefsdword(0, (unsigned int)v9);
  v11 = &loc_410929;
  return System::__linkproc__ DynArrayClear(&v14, &byte_410824);
}
// 402D00: using guessed type int __fastcall System::__linkproc__ _IOTest(_DWORD);
// 4034A8: using guessed type int __fastcall System::__linkproc__ WriteLn(_DWORD);
// 405328: using guessed type int __cdecl System::__linkproc__ DynArraySetLength(_DWORD);
// 405334: using guessed type int __fastcall System::__linkproc__ DynArrayClear(_DWORD, _DWORD);
// 410824: using guessed type char byte_410824;
// 410930: using guessed type _strings str_Delphi__Done_[2];
// 412A84: using guessed type int (*off_412A84)[273];

//----- (00410948) --------------------------------------------------------
int sub_410948()
{
  int (*v0)[7]; // eax@1
  signed int v1; // edx@4
  CHAR *v2; // ecx@4
  char *v3; // eax@8
  signed int v4; // edx@11
  CHAR *v5; // ecx@11
  int v6; // ecx@13
  const CHAR *v7; // eax@15
  Registry::TRegistry *v8; // ebx@16
  int (*v9)[14]; // eax@16
  signed int v10; // edx@19
  CHAR *v11; // esi@19
  char *v12; // eax@21
  signed int v13; // edx@24
  CHAR *v14; // esi@24
  unsigned int v16; // [sp-Ch] [bp-340h]@1
  void *v17; // [sp-8h] [bp-33Ch]@1
  int *v18; // [sp-4h] [bp-338h]@1
  int v19; // [sp+8h] [bp-32Ch]@1
  int v20; // [sp+Ch] [bp-328h]@1
  int v21; // [sp+10h] [bp-324h]@1
  int v22; // [sp+14h] [bp-320h]@1
  int v23; // [sp+18h] [bp-31Ch]@1
  char *v24; // [sp+1Ch] [bp-318h]@1
  CHAR Name; // [sp+21h] [bp-313h]@4
  char v26; // [sp+126h] [bp-20Eh]@8
  CHAR Filename; // [sp+22Bh] [bp-109h]@14
  int System::AnsiString; // [sp+330h] [bp-4h]@1
  int savedregs; // [sp+334h] [bp+0h]@1

  v19 = 0;
  v20 = 0;
  v21 = 0;
  v23 = 0;
  v22 = 0;
  System::AnsiString = 0;
  v18 = &savedregs;
  v17 = &loc_410BF7;
  v16 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v16);
  v24 = (char *)off_412A74;
  v0 = off_412A74;
  if ( off_412A74 )
    v0 = (int (*)[7])(*off_412A74)[-1];
  if ( (signed int)v0 > 0 )
  {
    v1 = 1;
    v2 = &Name;
    do
    {
      *v2++ = *((_BYTE *)&(*off_412A74)[0] + v1++ - 1) ^ 0x55;
      v0 = (int (*)[7])((char *)v0 - 1);
    }
    while ( v0 );
  }
  dword_4162FC = unknown_libname_78(0, 0, &Name);
  if ( GetLastError_0() == 183 )
    ExitProcess_0(0);
  SHGetFolderPathA(0, 28, 0, 0, &v26);
  v24 = off_412A78;
  v3 = off_412A78;
  if ( off_412A78 )
    v3 = (char *)*((_DWORD *)off_412A78 - 1);
  if ( (signed int)v3 > 0 )
  {
    v4 = 1;
    v5 = &Name;
    do
    {
      *v5++ = off_412A78[v4++ - 1] ^ 0x57;
      --v3;
    }
    while ( v3 );
  }
  unknown_libname_59(&v23, &v26, 261);
  unknown_libname_59(&v22, &Name, 261);
  System::__linkproc__ LStrCatN(&System::AnsiString, 3, v6, &str___0[1], v22);
  if ( !(unsigned __int8)Sysutils::FileExists(System::AnsiString) && GetModuleFileNameA_0_0(0, &Filename, 0x105u) )
  {
    v7 = (const CHAR *)System::__linkproc__ LStrToPChar(System::AnsiString);
    CopyFileA(&Filename, v7, -1);
  }
  v8 = (Registry::TRegistry *)Registry::TRegistry::TRegistry((Registry::TRegistry *)dword_40FEB0);
  Registry::TRegistry::SetRootKey(v8, 0x80000001);
  v24 = (char *)off_412A80;
  v9 = off_412A80;
  if ( off_412A80 )
    v9 = (int (*)[14])(*off_412A80)[-1];
  if ( (signed int)v9 > 0 )
  {
    v10 = 1;
    v11 = &Name;
    do
    {
      *v11++ = *((_BYTE *)&(*off_412A80)[0] + v10++ - 1) ^ 0x43;
      v9 = (int (*)[14])((char *)v9 - 1);
    }
    while ( v9 );
  }
  unknown_libname_59(&v21, &Name, 261);
  Registry::TRegistry::OpenKey(v8, v21, 0);
  v24 = (char *)off_412A7C;
  v12 = (char *)off_412A7C;
  if ( off_412A7C )
    v12 = (char *)*((_DWORD *)off_412A7C - 1);
  if ( (signed int)v12 > 0 )
  {
    v13 = 1;
    v14 = &Name;
    do
    {
      *v14++ = *((char *)off_412A7C + v13++ - 1) ^ 0x25;
      --v12;
    }
    while ( v12 );
  }
  unknown_libname_59(&v20, &Name, 261);
  if ( !(unsigned __int8)Registry::TRegistry::KeyExists(v8, v20) )
  {
    unknown_libname_59(&v19, &Name, 261);
    Registry::TRegistry::WriteString(v8, v19, System::AnsiString);
  }
  System::TObject::Free(v8);
  __writefsdword(0, v16);
  v18 = (int *)&loc_410BFE;
  System::__linkproc__ LStrArrayClr(&v19, 5);
  return System::__linkproc__ LStrClr(&System::AnsiString);
}
// 4044FC: using guessed type int __fastcall System::__linkproc__ LStrClr(_DWORD);
// 404520: using guessed type int __fastcall System::__linkproc__ LStrArrayClr(_DWORD, _DWORD);
// 40476C: using guessed type int __fastcall unknown_libname_59(_DWORD, _DWORD, _DWORD);
// 40485C: using guessed type int __fastcall System::__linkproc__ LStrCatN(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4048E8: using guessed type int __fastcall System::__linkproc__ LStrToPChar(_DWORD);
// 40FEB0: using guessed type int dword_40FEB0[2];
// 410138: using guessed type int __fastcall Registry::TRegistry::WriteString(_DWORD, _DWORD, _DWORD);
// 410334: using guessed type int __stdcall SHGetFolderPathA(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 410C04: using guessed type _strings str___0[1];
// 412A74: using guessed type int (*off_412A74)[7];
// 412A78: using guessed type char *off_412A78;
// 412A7C: using guessed type void *off_412A7C;
// 412A80: using guessed type int (*off_412A80)[14];
// 4162FC: using guessed type int dword_4162FC;

//----- (00410C10) --------------------------------------------------------
int sub_410C10()
{
  int result; // eax@3
  unsigned int v1; // [sp-Ch] [bp-Ch]@1
  void *v2; // [sp-8h] [bp-8h]@1
  int *v3; // [sp-4h] [bp-4h]@1
  int savedregs; // [sp+0h] [bp+0h]@1

  v3 = &savedregs;
  v2 = &loc_410C69;
  v1 = __readfsdword(0);
  __writefsdword(0, (unsigned int)&v1);
  if ( !++dword_416300 )
  {
    System::__linkproc__ LStrClr(&off_412A74);
    System::__linkproc__ LStrClr(&off_412A78);
    System::__linkproc__ LStrClr(&off_412A7C);
    System::__linkproc__ LStrClr(&off_412A80);
    System::__linkproc__ LStrClr(&off_412A84);
  }
  result = 0;
  __writefsdword(0, v1);
  return result;
}
// 4044FC: using guessed type int __fastcall System::__linkproc__ LStrClr(_DWORD);
// 412A74: using guessed type int (*off_412A74)[7];
// 412A78: using guessed type char *off_412A78;
// 412A7C: using guessed type void *off_412A7C;
// 412A80: using guessed type int (*off_412A80)[14];
// 412A84: using guessed type int (*off_412A84)[273];
// 416300: using guessed type int dword_416300;

#error "There were 1 decompilation failure(s) on 50 function(s)"
